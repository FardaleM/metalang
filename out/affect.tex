\documentclass[8pt]{article}
\usepackage[ruled,vlined]{algorithm2e}
\title{affect}
\begin{document}
\maketitle

Ce test permet de v\'erifier que l'impl\'ementation de l'affectation fonctionne correctement

record toto int foo;
int bar;
int blah;

end

\begin{algorithm}[H]
\SetKwInOut{Input}{input}
\SetKwInOut{Output}{output}
\Input{v1:int}
\Output{@toto}
def @toto t = with foo = $ v1 $
bar = $ v1 $
blah = $ v1 $ end
\Return $ t $\;
\caption{mktoto}
\end{algorithm}
\begin{algorithm}[H]
\SetKwInOut{Input}{input}
\SetKwInOut{Output}{output}
\Input{t\_:@toto,
t2\_:@toto}
\Output{int}
$@toto\:t := t\_$\;
$@toto\:t2 := t2\_$\;
def @toto t3 = with foo = $ 0 $
bar = $ 0 $
blah = $ 0 $ end
$t3 \leftarrow t2 $\;
$t \leftarrow t2 $\;
$t2 \leftarrow t3 $\;
t.blah ++;
$int\:len := 1$\;
$array<int>\:cache0=\:new\:int[len]$\;
\ForEach{ $i\;indice\;of\;cache0$ }{$cache0[i]:=-i$}
$array<int>\:cache1=\:new\:int[len]$\;
\ForEach{ $i\;indice\;of\;cache1$ }{$cache1[i]:=i$}
$array<int>\:cache2 := cache0$\;
$cache0 \leftarrow cache1 $\;
$cache2 \leftarrow cache0 $\;
\Return $ t.foo + t.blah * t.bar + t.bar * t.foo $\;
\caption{result}
\end{algorithm}

\begin{algorithm}[H]
$@toto\:t := mktoto(4)$\;
$@toto\:t2 := mktoto(5)$\;
$read_{int}$(t.bar)\;
read\_blank(STDIN)\;
$read_{int}$(t.blah)\;
read\_blank(STDIN)\;
$read_{int}$(t2.bar)\;
read\_blank(STDIN)\;
$read_{int}$(t.blah)\;
$print_{int}$($ result(t, t2) $)\;
$print_{int}$($ t.blah $)\;
\caption{Main}
\end{algorithm}
\end{document}

